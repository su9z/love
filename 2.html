<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>å°æ‚¦æ‚¦ä¸“å±çŒœæ‹³æœº - çŸ³å¤´å‰ªåˆ€å¸ƒ</title>
<style>
  :root{--bg:#f7f7f9;--card:#fff;--muted:#666;--accent:#ff6b81}
  body{font-family: "Arial","Microsoft YaHei",sans-serif; background:var(--bg); margin:0; padding:1.2rem; display:flex; align-items:center; justify-content:center; min-height:100vh;}
  .card{background:var(--card); padding:1.1rem 1.4rem; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.12); max-width:720px; width:100%;}
  .title{
    text-align:center;
    font-size:20px;
    font-weight:700;
    color:var(--accent);
    margin:0 0 10px 0;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }
  .title .small-note{font-size:13px; color:var(--muted); font-weight:500;}
  .row{display:flex; align-items:center; justify-content:center;}
  .choice{font-size:96px; width:160px; height:160px; display:flex; align-items:center; justify-content:center; border-radius:12px; background:#fff; margin:0 12px; border:3px solid rgba(0,0,0,.06)}
  .vs{font-size:28px; color:var(--muted); margin:0 8px}
  .controls{display:flex; align-items:center; justify-content:space-between; margin-top:10px; gap:12px;}
  button{padding:.5rem .9rem; border-radius:6px; border:1px solid rgba(0,0,0,.08); background:#fff; cursor:pointer}
  .muted{color:var(--muted); font-size:14px}
  .status{margin-top:10px; text-align:center; font-size:15px}
  .stats{margin-top:10px; text-align:center; color:var(--muted)}
  .small{font-size:13px}
  .options{display:flex; gap:10px; align-items:center}
  input[type="checkbox"]{transform:scale(1.1)}
  /* èƒœåˆ©/å¤±è´¥æç¤ºåŠ¨ç”»ï¼ˆçŸ­æš‚æ”¾å¤§ï¼‰ */
  .result-flash { display:inline-block; transition: transform .18s ease, color .18s ease; }
  .result-win { transform: scale(1.06); color: var(--accent); }
  .result-lose { transform: scale(1.06); color: #2b8cff; }
  @media (max-width:520px){
    .choice{width:110px;height:110px;font-size:64px}
    .title{font-size:16px}
  }
</style>
</head>
<body>
  <div class="card">
    <div class="title">
      <span>ğŸ² å°æ‚¦æ‚¦ä¸“å±çŒœæ‹³æœº</span>
      <span class="small-note">ï¼ˆåŒæ–¹éšæœºå‡ºæ‹³ï¼‰</span>
    </div>

    <div class="row">
      <div id="left" class="choice">ï¼Ÿ</div>
      <div class="vs">VS</div>
      <div id="right" class="choice">ï¼Ÿ</div>
    </div>

    <div class="status" id="result">ç‚¹å‡»â€œå¼€å§‹â€è¿›è¡Œä¸€å±€</div>

    <div class="controls">
      <div style="display:flex; gap:8px;">
        <button id="startBtn">å¼€å§‹</button>
        <button id="clearBtn">æ¸…é›¶è®¡åˆ†</button>
      </div>

      <div class="options">
        <label class="small"><input type="checkbox" id="autoplay"> è‡ªåŠ¨è¿ç»­æ¸¸æˆ</label>
        <label class="small muted" id="speedLabel">é€Ÿåº¦: ä¸­ç­‰</label>
      </div>
    </div>

    <div class="stats" id="score">ç©å®¶: 0 &nbsp;&nbsp; ç”µè„‘: 0 &nbsp;&nbsp; å¹³å±€: 0</div>
  </div>

<script>
(function(){
  const CHOICES = ["çŸ³å¤´","å‰ªåˆ€","å¸ƒ"];
  const EMOJI = {"çŸ³å¤´":"âœŠ","å‰ªåˆ€":"âœŒï¸","å¸ƒ":"âœ‹"};
  const leftEl = document.getElementById('left');
  const rightEl = document.getElementById('right');
  const resultEl = document.getElementById('result');
  const scoreEl = document.getElementById('score');
  const startBtn = document.getElementById('startBtn');
  const clearBtn = document.getElementById('clearBtn');
  const autoplayCheck = document.getElementById('autoplay');
  const speedLabel = document.getElementById('speedLabel');

  let playerScore = 0, computerScore = 0, draws = 0;
  let animating = false;
  let autoTimer = null;
  let speed = 1; // 0-fast,1-medium,2-slow

  function updateScore() {
    scoreEl.textContent = `ç©å®¶: ${playerScore}   ç”µè„‘: ${computerScore}   å¹³å±€: ${draws}`;
  }

  function judge(a,b){
    if(a===b) return 'å¹³å±€';
    if((a==='çŸ³å¤´'&&b==='å‰ªåˆ€')||(a==='å‰ªåˆ€'&&b==='å¸ƒ')||(a==='å¸ƒ'&&b==='çŸ³å¤´')) return 'ç©å®¶è·èƒœ';
    return 'ç”µè„‘è·èƒœ';
  }

  function randChoice(){ return CHOICES[Math.floor(Math.random()*CHOICES.length)]; }

  // è®¾ç½®ç»“æœæ–‡æœ¬å¹¶çŸ­æš‚æ·»åŠ æ ·å¼
  function showResultText(text, type) {
    // type: 'win' | 'lose' | 'draw'
    resultEl.innerHTML = text;
    resultEl.classList.remove('result-win','result-lose');
    if (type === 'win') {
      resultEl.classList.add('result-flash','result-win');
    } else if (type === 'lose') {
      resultEl.classList.add('result-flash','result-lose');
    } else {
      resultEl.classList.remove('result-flash');
    }
    // æ¸…é™¤åŠ¨ç”»ç±»ï¼ˆé˜²æ­¢ä¸€ç›´æ”¾å¤§ï¼‰
    setTimeout(()=> {
      resultEl.classList.remove('result-win','result-lose');
    }, 420);
  }

  function animateRound(){
    const cycles = 10 + Math.floor(Math.random()*6);
    const baseDelay = speed===0?40: (speed===2?140:80);
    let i=0;
    animating = true;
    startBtn.disabled = true;

    const t = setInterval(()=>{
      i++;
      leftEl.textContent = EMOJI[randChoice()];
      rightEl.textContent = EMOJI[randChoice()];
      if(i>=cycles){
        clearInterval(t);
        const finalA = randChoice();
        const finalB = randChoice();
        leftEl.textContent = EMOJI[finalA];
        rightEl.textContent = EMOJI[finalB];
        const r = judge(finalA, finalB);

        // è‡ªå®šä¹‰ä¿çš®æ–‡æ¡ˆ
        let resultMsg, type;
        if (r === 'ç©å®¶è·èƒœ') {
          playerScore++;
          resultMsg = `ç©å®¶ï¼š${finalA} ${EMOJI[finalA]}   ç”µè„‘ï¼š${finalB} ${EMOJI[finalB]}   â†’ å˜¿å˜¿ä½ èµ¢äº†å®å®`;
          type = 'win';
        } else if (r === 'ç”µè„‘è·èƒœ') {
          computerScore++;
          resultMsg = `ç©å®¶ï¼š${finalA} ${EMOJI[finalA]}   ç”µè„‘ï¼š${finalB} ${EMOJI[finalB]}   â†’ å¯æƒœä½ è¾“äº†å®å®`;
          type = 'lose';
        } else {
          draws++;
          resultMsg = `ç©å®¶ï¼š${finalA} ${EMOJI[finalA]}   ç”µè„‘ï¼š${finalB} ${EMOJI[finalB]}   â†’ å¹³å±€ï¼Œå¿«å†æ¥ä¸€å±€å§`;
          type = 'draw';
        }

        showResultText(resultMsg, type);
        updateScore();
        animating = false;
        startBtn.disabled = false;

        if(autoplayCheck.checked){
          autoTimer = setTimeout(()=>{ animateRound(); }, 700);
        }
      }
    }, baseDelay);
  }

  startBtn.addEventListener('click', ()=> {
    if(animating) return;
    if(autoTimer){ clearTimeout(autoTimer); autoTimer = null; }
    animateRound();
  });

  clearBtn.addEventListener('click', ()=> {
    playerScore = computerScore = draws = 0;
    updateScore();
    showResultText('è®¡åˆ†å·²é‡ç½®', 'draw');
  });

  autoplayCheck.addEventListener('change', ()=>{
    if(autoplayCheck.checked){
      if(!animating) animateRound();
    }else{
      if(autoTimer){ clearTimeout(autoTimer); autoTimer = null; }
    }
  });

  speedLabel.addEventListener('click', ()=>{
    speed = (speed+1) % 3;
    speedLabel.textContent = speed===0? 'é€Ÿåº¦: å¿«' : speed===1? 'é€Ÿåº¦: ä¸­ç­‰' : 'é€Ÿåº¦: æ…¢';
  });

  updateScore();
})();
</script>
</body>
</html>